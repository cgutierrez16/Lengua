{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __esDecorate = this && this.__esDecorate || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) {\n    if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\");\n    return f;\n  }\n  var kind = contextIn.kind,\n    key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _,\n    done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    var context = {};\n    for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n    for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n    context.addInitializer = function (f) {\n      if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\");\n      extraInitializers.push(accept(f || null));\n    };\n    var result = (0, decorators[i])(kind === \"accessor\" ? {\n      get: descriptor.get,\n      set: descriptor.set\n    } : descriptor[key], context);\n    if (kind === \"accessor\") {\n      if (result === void 0) continue;\n      if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n      if (_ = accept(result.get)) descriptor.get = _;\n      if (_ = accept(result.set)) descriptor.set = _;\n      if (_ = accept(result.init)) initializers.unshift(_);\n    } else if (_ = accept(result)) {\n      if (kind === \"field\") initializers.unshift(_);else descriptor[key] = _;\n    }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\nvar __runInitializers = this && this.__runInitializers || function (thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BidiBrowserContext = void 0;\nconst Browser_js_1 = require(\"../api/Browser.js\");\nconst BrowserContext_js_1 = require(\"../api/BrowserContext.js\");\nconst EventEmitter_js_1 = require(\"../common/EventEmitter.js\");\nconst util_js_1 = require(\"../common/util.js\");\nconst decorators_js_1 = require(\"../util/decorators.js\");\nconst UserContext_js_1 = require(\"./core/UserContext.js\");\nconst Page_js_1 = require(\"./Page.js\");\nconst Target_js_1 = require(\"./Target.js\");\nconst Target_js_2 = require(\"./Target.js\");\n/**\n * @internal\n */\nlet BidiBrowserContext = (() => {\n  let _classSuper = BrowserContext_js_1.BrowserContext;\n  let _instanceExtraInitializers = [];\n  let _trustedEmitter_decorators;\n  let _trustedEmitter_initializers = [];\n  return class BidiBrowserContext extends _classSuper {\n    static {\n      const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n      _trustedEmitter_decorators = [(0, decorators_js_1.bubble)()];\n      __esDecorate(this, null, _trustedEmitter_decorators, {\n        kind: \"accessor\",\n        name: \"trustedEmitter\",\n        static: false,\n        private: false,\n        access: {\n          has: obj => \"trustedEmitter\" in obj,\n          get: obj => obj.trustedEmitter,\n          set: (obj, value) => {\n            obj.trustedEmitter = value;\n          }\n        },\n        metadata: _metadata\n      }, _trustedEmitter_initializers, _instanceExtraInitializers);\n      if (_metadata) Object.defineProperty(this, Symbol.metadata, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: _metadata\n      });\n    }\n    static from(browser, userContext, options) {\n      const context = new BidiBrowserContext(browser, userContext, options);\n      context.#initialize();\n      return context;\n    }\n    #trustedEmitter_accessor_storage = (__runInitializers(this, _instanceExtraInitializers), __runInitializers(this, _trustedEmitter_initializers, new EventEmitter_js_1.EventEmitter()));\n    get trustedEmitter() {\n      return this.#trustedEmitter_accessor_storage;\n    }\n    set trustedEmitter(value) {\n      this.#trustedEmitter_accessor_storage = value;\n    }\n    #browser;\n    #defaultViewport;\n    // This is public because of cookies.\n    userContext;\n    #pages = new WeakMap();\n    #targets = new Map();\n    #overrides = [];\n    constructor(browser, userContext, options) {\n      super();\n      this.#browser = browser;\n      this.userContext = userContext;\n      this.#defaultViewport = options.defaultViewport;\n    }\n    #initialize() {\n      // Create targets for existing browsing contexts.\n      for (const browsingContext of this.userContext.browsingContexts) {\n        this.#createPage(browsingContext);\n      }\n      this.userContext.on('browsingcontext', ({\n        browsingContext\n      }) => {\n        this.#createPage(browsingContext);\n      });\n      this.userContext.on('closed', () => {\n        this.trustedEmitter.removeAllListeners();\n      });\n    }\n    #createPage(browsingContext) {\n      const page = Page_js_1.BidiPage.from(this, browsingContext);\n      this.#pages.set(browsingContext, page);\n      page.trustedEmitter.on(\"close\" /* PageEvent.Close */, () => {\n        this.#pages.delete(browsingContext);\n      });\n      // -- Target stuff starts here --\n      const pageTarget = new Target_js_2.BidiPageTarget(page);\n      const pageTargets = new Map();\n      this.#targets.set(page, [pageTarget, pageTargets]);\n      page.trustedEmitter.on(\"frameattached\" /* PageEvent.FrameAttached */, frame => {\n        const bidiFrame = frame;\n        const target = new Target_js_2.BidiFrameTarget(bidiFrame);\n        pageTargets.set(bidiFrame, target);\n        this.trustedEmitter.emit(\"targetcreated\" /* BrowserContextEvent.TargetCreated */, target);\n      });\n      page.trustedEmitter.on(\"framenavigated\" /* PageEvent.FrameNavigated */, frame => {\n        const bidiFrame = frame;\n        const target = pageTargets.get(bidiFrame);\n        // If there is no target, then this is the page's frame.\n        if (target === undefined) {\n          this.trustedEmitter.emit(\"targetchanged\" /* BrowserContextEvent.TargetChanged */, pageTarget);\n        } else {\n          this.trustedEmitter.emit(\"targetchanged\" /* BrowserContextEvent.TargetChanged */, target);\n        }\n      });\n      page.trustedEmitter.on(\"framedetached\" /* PageEvent.FrameDetached */, frame => {\n        const bidiFrame = frame;\n        const target = pageTargets.get(bidiFrame);\n        if (target === undefined) {\n          return;\n        }\n        pageTargets.delete(bidiFrame);\n        this.trustedEmitter.emit(\"targetdestroyed\" /* BrowserContextEvent.TargetDestroyed */, target);\n      });\n      page.trustedEmitter.on(\"workercreated\" /* PageEvent.WorkerCreated */, worker => {\n        const bidiWorker = worker;\n        const target = new Target_js_1.BidiWorkerTarget(bidiWorker);\n        pageTargets.set(bidiWorker, target);\n        this.trustedEmitter.emit(\"targetcreated\" /* BrowserContextEvent.TargetCreated */, target);\n      });\n      page.trustedEmitter.on(\"workerdestroyed\" /* PageEvent.WorkerDestroyed */, worker => {\n        const bidiWorker = worker;\n        const target = pageTargets.get(bidiWorker);\n        if (target === undefined) {\n          return;\n        }\n        pageTargets.delete(worker);\n        this.trustedEmitter.emit(\"targetdestroyed\" /* BrowserContextEvent.TargetDestroyed */, target);\n      });\n      page.trustedEmitter.on(\"close\" /* PageEvent.Close */, () => {\n        this.#targets.delete(page);\n        this.trustedEmitter.emit(\"targetdestroyed\" /* BrowserContextEvent.TargetDestroyed */, pageTarget);\n      });\n      this.trustedEmitter.emit(\"targetcreated\" /* BrowserContextEvent.TargetCreated */, pageTarget);\n      // -- Target stuff ends here --\n      return page;\n    }\n    targets() {\n      return [...this.#targets.values()].flatMap(([target, frames]) => {\n        return [target, ...frames.values()];\n      });\n    }\n    async newPage() {\n      const context = await this.userContext.createBrowsingContext(\"tab\" /* Bidi.BrowsingContext.CreateType.Tab */);\n      const page = this.#pages.get(context);\n      if (!page) {\n        throw new Error('Page is not found');\n      }\n      if (this.#defaultViewport) {\n        try {\n          await page.setViewport(this.#defaultViewport);\n        } catch {\n          // No support for setViewport in Firefox.\n        }\n      }\n      return page;\n    }\n    async close() {\n      if (!this.isIncognito()) {\n        throw new Error('Default context cannot be closed!');\n      }\n      try {\n        await this.userContext.remove();\n      } catch (error) {\n        (0, util_js_1.debugError)(error);\n      }\n    }\n    browser() {\n      return this.#browser;\n    }\n    async pages() {\n      return [...this.userContext.browsingContexts].map(context => {\n        return this.#pages.get(context);\n      });\n    }\n    isIncognito() {\n      return this.userContext.id !== UserContext_js_1.UserContext.DEFAULT;\n    }\n    async overridePermissions(origin, permissions) {\n      const permissionsSet = new Set(permissions.map(permission => {\n        const protocolPermission = Browser_js_1.WEB_PERMISSION_TO_PROTOCOL_PERMISSION.get(permission);\n        if (!protocolPermission) {\n          throw new Error('Unknown permission: ' + permission);\n        }\n        return permission;\n      }));\n      await Promise.all(Array.from(Browser_js_1.WEB_PERMISSION_TO_PROTOCOL_PERMISSION.keys()).map(permission => {\n        const result = this.userContext.setPermissions(origin, {\n          name: permission\n        }, permissionsSet.has(permission) ? \"granted\" /* Bidi.Permissions.PermissionState.Granted */ : \"denied\" /* Bidi.Permissions.PermissionState.Denied */);\n        this.#overrides.push({\n          origin,\n          permission\n        });\n        // TODO: some permissions are outdated and setting them to denied does\n        // not work.\n        if (!permissionsSet.has(permission)) {\n          return result.catch(util_js_1.debugError);\n        }\n        return result;\n      }));\n    }\n    async clearPermissionOverrides() {\n      const promises = this.#overrides.map(({\n        permission,\n        origin\n      }) => {\n        return this.userContext.setPermissions(origin, {\n          name: permission\n        }, \"prompt\" /* Bidi.Permissions.PermissionState.Prompt */).catch(util_js_1.debugError);\n      });\n      this.#overrides = [];\n      await Promise.all(promises);\n    }\n    get id() {\n      if (this.userContext.id === UserContext_js_1.UserContext.DEFAULT) {\n        return undefined;\n      }\n      return this.userContext.id;\n    }\n  };\n})();\nexports.BidiBrowserContext = BidiBrowserContext;","map":{"version":3,"names":["Browser_js_1","require","BrowserContext_js_1","EventEmitter_js_1","util_js_1","decorators_js_1","UserContext_js_1","Page_js_1","Target_js_1","Target_js_2","BidiBrowserContext","BrowserContext","_classSuper","bubble","__esDecorate","_trustedEmitter_decorators","kind","name","static","private","access","has","obj","get","trustedEmitter","set","value","metadata","_metadata","_trustedEmitter_initializers","_instanceExtraInitializers","from","browser","userContext","options","context","initialize","trustedEmitter_accessor_storage","__runInitializers","EventEmitter","defaultViewport","pages","WeakMap","targets","Map","overrides","constructor","#initialize","browsingContext","browsingContexts","createPage","on","removeAllListeners","#createPage","page","BidiPage","delete","pageTarget","BidiPageTarget","pageTargets","frame","bidiFrame","target","BidiFrameTarget","emit","undefined","worker","bidiWorker","BidiWorkerTarget","values","flatMap","frames","newPage","createBrowsingContext","Error","setViewport","close","isIncognito","remove","error","debugError","map","id","UserContext","DEFAULT","overridePermissions","origin","permissions","permissionsSet","Set","permission","protocolPermission","WEB_PERMISSION_TO_PROTOCOL_PERMISSION","Promise","all","Array","keys","result","setPermissions","push","catch","clearPermissionOverrides","promises","exports"],"sources":["/Users/carlosgutierrez/Documents/React/spanish/node_modules/puppeteer-core/src/bidi/BrowserContext.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as Bidi from 'chromium-bidi/lib/cjs/protocol/protocol.js';\n\nimport type {Permission} from '../api/Browser.js';\nimport {WEB_PERMISSION_TO_PROTOCOL_PERMISSION} from '../api/Browser.js';\nimport type {BrowserContextEvents} from '../api/BrowserContext.js';\nimport {BrowserContext, BrowserContextEvent} from '../api/BrowserContext.js';\nimport {PageEvent, type Page} from '../api/Page.js';\nimport type {Target} from '../api/Target.js';\nimport {EventEmitter} from '../common/EventEmitter.js';\nimport {debugError} from '../common/util.js';\nimport type {Viewport} from '../common/Viewport.js';\nimport {bubble} from '../util/decorators.js';\n\nimport type {BidiBrowser} from './Browser.js';\nimport type {BrowsingContext} from './core/BrowsingContext.js';\nimport {UserContext} from './core/UserContext.js';\nimport type {BidiFrame} from './Frame.js';\nimport {BidiPage} from './Page.js';\nimport {BidiWorkerTarget} from './Target.js';\nimport {BidiFrameTarget, BidiPageTarget} from './Target.js';\nimport type {BidiWebWorker} from './WebWorker.js';\n\n/**\n * @internal\n */\nexport interface BidiBrowserContextOptions {\n  defaultViewport: Viewport | null;\n}\n\n/**\n * @internal\n */\nexport class BidiBrowserContext extends BrowserContext {\n  static from(\n    browser: BidiBrowser,\n    userContext: UserContext,\n    options: BidiBrowserContextOptions\n  ): BidiBrowserContext {\n    const context = new BidiBrowserContext(browser, userContext, options);\n    context.#initialize();\n    return context;\n  }\n\n  @bubble()\n  accessor trustedEmitter = new EventEmitter<BrowserContextEvents>();\n\n  readonly #browser: BidiBrowser;\n  readonly #defaultViewport: Viewport | null;\n  // This is public because of cookies.\n  readonly userContext: UserContext;\n  readonly #pages = new WeakMap<BrowsingContext, BidiPage>();\n  readonly #targets = new Map<\n    BidiPage,\n    [\n      BidiPageTarget,\n      Map<BidiFrame | BidiWebWorker, BidiFrameTarget | BidiWorkerTarget>,\n    ]\n  >();\n\n  #overrides: Array<{origin: string; permission: Permission}> = [];\n\n  private constructor(\n    browser: BidiBrowser,\n    userContext: UserContext,\n    options: BidiBrowserContextOptions\n  ) {\n    super();\n    this.#browser = browser;\n    this.userContext = userContext;\n    this.#defaultViewport = options.defaultViewport;\n  }\n\n  #initialize() {\n    // Create targets for existing browsing contexts.\n    for (const browsingContext of this.userContext.browsingContexts) {\n      this.#createPage(browsingContext);\n    }\n\n    this.userContext.on('browsingcontext', ({browsingContext}) => {\n      this.#createPage(browsingContext);\n    });\n    this.userContext.on('closed', () => {\n      this.trustedEmitter.removeAllListeners();\n    });\n  }\n\n  #createPage(browsingContext: BrowsingContext): BidiPage {\n    const page = BidiPage.from(this, browsingContext);\n    this.#pages.set(browsingContext, page);\n    page.trustedEmitter.on(PageEvent.Close, () => {\n      this.#pages.delete(browsingContext);\n    });\n\n    // -- Target stuff starts here --\n    const pageTarget = new BidiPageTarget(page);\n    const pageTargets = new Map();\n    this.#targets.set(page, [pageTarget, pageTargets]);\n\n    page.trustedEmitter.on(PageEvent.FrameAttached, frame => {\n      const bidiFrame = frame as BidiFrame;\n      const target = new BidiFrameTarget(bidiFrame);\n      pageTargets.set(bidiFrame, target);\n      this.trustedEmitter.emit(BrowserContextEvent.TargetCreated, target);\n    });\n    page.trustedEmitter.on(PageEvent.FrameNavigated, frame => {\n      const bidiFrame = frame as BidiFrame;\n      const target = pageTargets.get(bidiFrame);\n      // If there is no target, then this is the page's frame.\n      if (target === undefined) {\n        this.trustedEmitter.emit(BrowserContextEvent.TargetChanged, pageTarget);\n      } else {\n        this.trustedEmitter.emit(BrowserContextEvent.TargetChanged, target);\n      }\n    });\n    page.trustedEmitter.on(PageEvent.FrameDetached, frame => {\n      const bidiFrame = frame as BidiFrame;\n      const target = pageTargets.get(bidiFrame);\n      if (target === undefined) {\n        return;\n      }\n      pageTargets.delete(bidiFrame);\n      this.trustedEmitter.emit(BrowserContextEvent.TargetDestroyed, target);\n    });\n\n    page.trustedEmitter.on(PageEvent.WorkerCreated, worker => {\n      const bidiWorker = worker as BidiWebWorker;\n      const target = new BidiWorkerTarget(bidiWorker);\n      pageTargets.set(bidiWorker, target);\n      this.trustedEmitter.emit(BrowserContextEvent.TargetCreated, target);\n    });\n    page.trustedEmitter.on(PageEvent.WorkerDestroyed, worker => {\n      const bidiWorker = worker as BidiWebWorker;\n      const target = pageTargets.get(bidiWorker);\n      if (target === undefined) {\n        return;\n      }\n      pageTargets.delete(worker);\n      this.trustedEmitter.emit(BrowserContextEvent.TargetDestroyed, target);\n    });\n\n    page.trustedEmitter.on(PageEvent.Close, () => {\n      this.#targets.delete(page);\n      this.trustedEmitter.emit(BrowserContextEvent.TargetDestroyed, pageTarget);\n    });\n    this.trustedEmitter.emit(BrowserContextEvent.TargetCreated, pageTarget);\n    // -- Target stuff ends here --\n\n    return page;\n  }\n\n  override targets(): Target[] {\n    return [...this.#targets.values()].flatMap(([target, frames]) => {\n      return [target, ...frames.values()];\n    });\n  }\n\n  override async newPage(): Promise<Page> {\n    const context = await this.userContext.createBrowsingContext(\n      Bidi.BrowsingContext.CreateType.Tab\n    );\n    const page = this.#pages.get(context)!;\n    if (!page) {\n      throw new Error('Page is not found');\n    }\n    if (this.#defaultViewport) {\n      try {\n        await page.setViewport(this.#defaultViewport);\n      } catch {\n        // No support for setViewport in Firefox.\n      }\n    }\n\n    return page;\n  }\n\n  override async close(): Promise<void> {\n    if (!this.isIncognito()) {\n      throw new Error('Default context cannot be closed!');\n    }\n\n    try {\n      await this.userContext.remove();\n    } catch (error) {\n      debugError(error);\n    }\n  }\n\n  override browser(): BidiBrowser {\n    return this.#browser;\n  }\n\n  override async pages(): Promise<BidiPage[]> {\n    return [...this.userContext.browsingContexts].map(context => {\n      return this.#pages.get(context)!;\n    });\n  }\n\n  override isIncognito(): boolean {\n    return this.userContext.id !== UserContext.DEFAULT;\n  }\n\n  override async overridePermissions(\n    origin: string,\n    permissions: Permission[]\n  ): Promise<void> {\n    const permissionsSet = new Set(\n      permissions.map(permission => {\n        const protocolPermission =\n          WEB_PERMISSION_TO_PROTOCOL_PERMISSION.get(permission);\n        if (!protocolPermission) {\n          throw new Error('Unknown permission: ' + permission);\n        }\n        return permission;\n      })\n    );\n    await Promise.all(\n      Array.from(WEB_PERMISSION_TO_PROTOCOL_PERMISSION.keys()).map(\n        permission => {\n          const result = this.userContext.setPermissions(\n            origin,\n            {\n              name: permission,\n            },\n            permissionsSet.has(permission)\n              ? Bidi.Permissions.PermissionState.Granted\n              : Bidi.Permissions.PermissionState.Denied\n          );\n          this.#overrides.push({origin, permission});\n          // TODO: some permissions are outdated and setting them to denied does\n          // not work.\n          if (!permissionsSet.has(permission)) {\n            return result.catch(debugError);\n          }\n          return result;\n        }\n      )\n    );\n  }\n\n  override async clearPermissionOverrides(): Promise<void> {\n    const promises = this.#overrides.map(({permission, origin}) => {\n      return this.userContext\n        .setPermissions(\n          origin,\n          {\n            name: permission,\n          },\n          Bidi.Permissions.PermissionState.Prompt\n        )\n        .catch(debugError);\n    });\n    this.#overrides = [];\n    await Promise.all(promises);\n  }\n\n  override get id(): string | undefined {\n    if (this.userContext.id === UserContext.DEFAULT) {\n      return undefined;\n    }\n    return this.userContext.id;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}