{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2021 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CommandProcessor = void 0;\nconst protocol_js_1 = require(\"../protocol/protocol.js\");\nconst EventEmitter_js_1 = require(\"../utils/EventEmitter.js\");\nconst log_js_1 = require(\"../utils/log.js\");\nconst BidiNoOpParser_js_1 = require(\"./BidiNoOpParser.js\");\nconst BrowserProcessor_js_1 = require(\"./modules/browser/BrowserProcessor.js\");\nconst CdpProcessor_js_1 = require(\"./modules/cdp/CdpProcessor.js\");\nconst BrowsingContextProcessor_js_1 = require(\"./modules/context/BrowsingContextProcessor.js\");\nconst InputProcessor_js_1 = require(\"./modules/input/InputProcessor.js\");\nconst NetworkProcessor_js_1 = require(\"./modules/network/NetworkProcessor.js\");\nconst PermissionsProcessor_js_1 = require(\"./modules/permissions/PermissionsProcessor.js\");\nconst ScriptProcessor_js_1 = require(\"./modules/script/ScriptProcessor.js\");\nconst SessionProcessor_js_1 = require(\"./modules/session/SessionProcessor.js\");\nconst StorageProcessor_js_1 = require(\"./modules/storage/StorageProcessor.js\");\nconst OutgoingMessage_js_1 = require(\"./OutgoingMessage.js\");\nclass CommandProcessor extends EventEmitter_js_1.EventEmitter {\n  // keep-sorted start\n  #browserProcessor;\n  #browsingContextProcessor;\n  #cdpProcessor;\n  #inputProcessor;\n  #networkProcessor;\n  #permissionsProcessor;\n  #scriptProcessor;\n  #sessionProcessor;\n  #storageProcessor;\n  // keep-sorted end\n  #parser;\n  #logger;\n  constructor(cdpConnection, browserCdpClient, eventManager, browsingContextStorage, realmStorage, preloadScriptStorage, networkStorage, parser = new BidiNoOpParser_js_1.BidiNoOpParser(), logger) {\n    super();\n    this.#parser = parser;\n    this.#logger = logger;\n    // keep-sorted start block=yes\n    this.#browserProcessor = new BrowserProcessor_js_1.BrowserProcessor(browserCdpClient);\n    this.#browsingContextProcessor = new BrowsingContextProcessor_js_1.BrowsingContextProcessor(browserCdpClient, browsingContextStorage);\n    this.#cdpProcessor = new CdpProcessor_js_1.CdpProcessor(browsingContextStorage, realmStorage, cdpConnection, browserCdpClient);\n    this.#inputProcessor = new InputProcessor_js_1.InputProcessor(browsingContextStorage, realmStorage);\n    this.#networkProcessor = new NetworkProcessor_js_1.NetworkProcessor(browsingContextStorage, networkStorage);\n    this.#permissionsProcessor = new PermissionsProcessor_js_1.PermissionsProcessor(browserCdpClient);\n    this.#scriptProcessor = new ScriptProcessor_js_1.ScriptProcessor(browsingContextStorage, realmStorage, preloadScriptStorage, logger);\n    this.#sessionProcessor = new SessionProcessor_js_1.SessionProcessor(eventManager, browserCdpClient);\n    this.#storageProcessor = new StorageProcessor_js_1.StorageProcessor(browserCdpClient, browsingContextStorage, logger);\n    // keep-sorted end\n  }\n  async #processCommand(command) {\n    switch (command.method) {\n      case 'session.end':\n        // TODO: Implement.\n        break;\n      // Browser domain\n      // keep-sorted start block=yes\n      case 'browser.close':\n        return this.#browserProcessor.close();\n      case 'browser.createUserContext':\n        return await this.#browserProcessor.createUserContext(command.params);\n      case 'browser.getUserContexts':\n        return await this.#browserProcessor.getUserContexts();\n      case 'browser.removeUserContext':\n        return await this.#browserProcessor.removeUserContext(this.#parser.parseRemoveUserContextParams(command.params));\n      // keep-sorted end\n      // Browsing Context domain\n      // keep-sorted start block=yes\n      case 'browsingContext.activate':\n        return await this.#browsingContextProcessor.activate(this.#parser.parseActivateParams(command.params));\n      case 'browsingContext.captureScreenshot':\n        return await this.#browsingContextProcessor.captureScreenshot(this.#parser.parseCaptureScreenshotParams(command.params));\n      case 'browsingContext.close':\n        return await this.#browsingContextProcessor.close(this.#parser.parseCloseParams(command.params));\n      case 'browsingContext.create':\n        return await this.#browsingContextProcessor.create(this.#parser.parseCreateParams(command.params));\n      case 'browsingContext.getTree':\n        return this.#browsingContextProcessor.getTree(this.#parser.parseGetTreeParams(command.params));\n      case 'browsingContext.handleUserPrompt':\n        return await this.#browsingContextProcessor.handleUserPrompt(this.#parser.parseHandleUserPromptParams(command.params));\n      case 'browsingContext.locateNodes':\n        return await this.#browsingContextProcessor.locateNodes(this.#parser.parseLocateNodesParams(command.params));\n      case 'browsingContext.navigate':\n        return await this.#browsingContextProcessor.navigate(this.#parser.parseNavigateParams(command.params));\n      case 'browsingContext.print':\n        return await this.#browsingContextProcessor.print(this.#parser.parsePrintParams(command.params));\n      case 'browsingContext.reload':\n        return await this.#browsingContextProcessor.reload(this.#parser.parseReloadParams(command.params));\n      case 'browsingContext.setViewport':\n        return await this.#browsingContextProcessor.setViewport(this.#parser.parseSetViewportParams(command.params));\n      case 'browsingContext.traverseHistory':\n        return await this.#browsingContextProcessor.traverseHistory(this.#parser.parseTraverseHistoryParams(command.params));\n      // keep-sorted end\n      // CDP domain\n      // keep-sorted start block=yes\n      case 'cdp.getSession':\n        return this.#cdpProcessor.getSession(this.#parser.parseGetSessionParams(command.params));\n      case 'cdp.resolveRealm':\n        return this.#cdpProcessor.resolveRealm(this.#parser.parseResolveRealmParams(command.params));\n      case 'cdp.sendCommand':\n        return await this.#cdpProcessor.sendCommand(this.#parser.parseSendCommandParams(command.params));\n      // keep-sorted end\n      // Input domain\n      // keep-sorted start block=yes\n      case 'input.performActions':\n        return await this.#inputProcessor.performActions(this.#parser.parsePerformActionsParams(command.params));\n      case 'input.releaseActions':\n        return await this.#inputProcessor.releaseActions(this.#parser.parseReleaseActionsParams(command.params));\n      case 'input.setFiles':\n        return await this.#inputProcessor.setFiles(this.#parser.parseSetFilesParams(command.params));\n      // keep-sorted end\n      // Network domain\n      // keep-sorted start block=yes\n      case 'network.addIntercept':\n        return await this.#networkProcessor.addIntercept(this.#parser.parseAddInterceptParams(command.params));\n      case 'network.continueRequest':\n        return await this.#networkProcessor.continueRequest(this.#parser.parseContinueRequestParams(command.params));\n      case 'network.continueResponse':\n        return await this.#networkProcessor.continueResponse(this.#parser.parseContinueResponseParams(command.params));\n      case 'network.continueWithAuth':\n        return await this.#networkProcessor.continueWithAuth(this.#parser.parseContinueWithAuthParams(command.params));\n      case 'network.failRequest':\n        return await this.#networkProcessor.failRequest(this.#parser.parseFailRequestParams(command.params));\n      case 'network.provideResponse':\n        return await this.#networkProcessor.provideResponse(this.#parser.parseProvideResponseParams(command.params));\n      case 'network.removeIntercept':\n        return await this.#networkProcessor.removeIntercept(this.#parser.parseRemoveInterceptParams(command.params));\n      // keep-sorted end\n      // Permissions domain\n      // keep-sorted start block=yes\n      case 'permissions.setPermission':\n        return await this.#permissionsProcessor.setPermissions(this.#parser.parseSetPermissionsParams(command.params));\n      // keep-sorted end\n      // Script domain\n      // keep-sorted start block=yes\n      case 'script.addPreloadScript':\n        return await this.#scriptProcessor.addPreloadScript(this.#parser.parseAddPreloadScriptParams(command.params));\n      case 'script.callFunction':\n        return await this.#scriptProcessor.callFunction(this.#parser.parseCallFunctionParams(this.#processTargetParams(command.params)));\n      case 'script.disown':\n        return await this.#scriptProcessor.disown(this.#parser.parseDisownParams(this.#processTargetParams(command.params)));\n      case 'script.evaluate':\n        return await this.#scriptProcessor.evaluate(this.#parser.parseEvaluateParams(this.#processTargetParams(command.params)));\n      case 'script.getRealms':\n        return this.#scriptProcessor.getRealms(this.#parser.parseGetRealmsParams(command.params));\n      case 'script.removePreloadScript':\n        return await this.#scriptProcessor.removePreloadScript(this.#parser.parseRemovePreloadScriptParams(command.params));\n      // keep-sorted end\n      // Session domain\n      // keep-sorted start block=yes\n      case 'session.new':\n        return await this.#sessionProcessor.create(command.params);\n      case 'session.status':\n        return this.#sessionProcessor.status();\n      case 'session.subscribe':\n        return await this.#sessionProcessor.subscribe(this.#parser.parseSubscribeParams(command.params), command.channel);\n      case 'session.unsubscribe':\n        return await this.#sessionProcessor.unsubscribe(this.#parser.parseSubscribeParams(command.params), command.channel);\n      // keep-sorted end\n      // Storage domain\n      // keep-sorted start block=yes\n      case 'storage.deleteCookies':\n        return await this.#storageProcessor.deleteCookies(this.#parser.parseDeleteCookiesParams(command.params));\n      case 'storage.getCookies':\n        return await this.#storageProcessor.getCookies(this.#parser.parseGetCookiesParams(command.params));\n      case 'storage.setCookie':\n        return await this.#storageProcessor.setCookie(this.#parser.parseSetCookieParams(command.params));\n      // keep-sorted end\n    }\n    // Intentionally kept outside the switch statement to ensure that\n    // ESLint @typescript-eslint/switch-exhaustiveness-check triggers if a new\n    // command is added.\n    throw new protocol_js_1.UnknownCommandException(`Unknown command '${command.method}'.`);\n  }\n  // Workaround for as zod.union always take the first schema\n  // https://github.com/w3c/webdriver-bidi/issues/635\n  #processTargetParams(params) {\n    if (typeof params === 'object' && params && 'target' in params && typeof params.target === 'object' && params.target && 'context' in params.target) {\n      delete params.target['realm'];\n    }\n    return params;\n  }\n  async processCommand(command) {\n    try {\n      const result = await this.#processCommand(command);\n      const response = {\n        type: 'success',\n        id: command.id,\n        result\n      };\n      this.emit(\"response\" /* CommandProcessorEvents.Response */, {\n        message: OutgoingMessage_js_1.OutgoingMessage.createResolved(response, command.channel),\n        event: command.method\n      });\n    } catch (e) {\n      if (e instanceof protocol_js_1.Exception) {\n        this.emit(\"response\" /* CommandProcessorEvents.Response */, {\n          message: OutgoingMessage_js_1.OutgoingMessage.createResolved(e.toErrorResponse(command.id), command.channel),\n          event: command.method\n        });\n      } else {\n        const error = e;\n        this.#logger?.(log_js_1.LogType.bidi, error);\n        this.emit(\"response\" /* CommandProcessorEvents.Response */, {\n          message: OutgoingMessage_js_1.OutgoingMessage.createResolved(new protocol_js_1.UnknownErrorException(error.message, error.stack).toErrorResponse(command.id), command.channel),\n          event: command.method\n        });\n      }\n    }\n  }\n}\nexports.CommandProcessor = CommandProcessor;","map":{"version":3,"names":["protocol_js_1","require","EventEmitter_js_1","log_js_1","BidiNoOpParser_js_1","BrowserProcessor_js_1","CdpProcessor_js_1","BrowsingContextProcessor_js_1","InputProcessor_js_1","NetworkProcessor_js_1","PermissionsProcessor_js_1","ScriptProcessor_js_1","SessionProcessor_js_1","StorageProcessor_js_1","OutgoingMessage_js_1","CommandProcessor","EventEmitter","browserProcessor","browsingContextProcessor","cdpProcessor","inputProcessor","networkProcessor","permissionsProcessor","scriptProcessor","sessionProcessor","storageProcessor","parser","logger","constructor","cdpConnection","browserCdpClient","eventManager","browsingContextStorage","realmStorage","preloadScriptStorage","networkStorage","BidiNoOpParser","BrowserProcessor","BrowsingContextProcessor","CdpProcessor","InputProcessor","NetworkProcessor","PermissionsProcessor","ScriptProcessor","SessionProcessor","StorageProcessor","processCommand","#processCommand","command","method","close","createUserContext","params","getUserContexts","removeUserContext","parseRemoveUserContextParams","activate","parseActivateParams","captureScreenshot","parseCaptureScreenshotParams","parseCloseParams","create","parseCreateParams","getTree","parseGetTreeParams","handleUserPrompt","parseHandleUserPromptParams","locateNodes","parseLocateNodesParams","navigate","parseNavigateParams","print","parsePrintParams","reload","parseReloadParams","setViewport","parseSetViewportParams","traverseHistory","parseTraverseHistoryParams","getSession","parseGetSessionParams","resolveRealm","parseResolveRealmParams","sendCommand","parseSendCommandParams","performActions","parsePerformActionsParams","releaseActions","parseReleaseActionsParams","setFiles","parseSetFilesParams","addIntercept","parseAddInterceptParams","continueRequest","parseContinueRequestParams","continueResponse","parseContinueResponseParams","continueWithAuth","parseContinueWithAuthParams","failRequest","parseFailRequestParams","provideResponse","parseProvideResponseParams","removeIntercept","parseRemoveInterceptParams","setPermissions","parseSetPermissionsParams","addPreloadScript","parseAddPreloadScriptParams","callFunction","parseCallFunctionParams","processTargetParams","disown","parseDisownParams","evaluate","parseEvaluateParams","getRealms","parseGetRealmsParams","removePreloadScript","parseRemovePreloadScriptParams","status","subscribe","parseSubscribeParams","channel","unsubscribe","deleteCookies","parseDeleteCookiesParams","getCookies","parseGetCookiesParams","setCookie","parseSetCookieParams","UnknownCommandException","#processTargetParams","target","result","response","type","id","emit","message","OutgoingMessage","createResolved","event","e","Exception","toErrorResponse","error","LogType","bidi","UnknownErrorException","stack","exports"],"sources":["../../../src/bidiMapper/CommandProcessor.ts"],"sourcesContent":[null],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;;AAmBA,MAAAA,aAAA,GAAAC,OAAA;AAOA,MAAAC,iBAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AAGA,MAAAG,mBAAA,GAAAH,OAAA;AAEA,MAAAI,qBAAA,GAAAJ,OAAA;AACA,MAAAK,iBAAA,GAAAL,OAAA;AACA,MAAAM,6BAAA,GAAAN,OAAA;AAEA,MAAAO,mBAAA,GAAAP,OAAA;AACA,MAAAQ,qBAAA,GAAAR,OAAA;AAEA,MAAAS,yBAAA,GAAAT,OAAA;AAGA,MAAAU,oBAAA,GAAAV,OAAA;AAEA,MAAAW,qBAAA,GAAAX,OAAA;AACA,MAAAY,qBAAA,GAAAZ,OAAA;AACA,MAAAa,oBAAA,GAAAb,OAAA;AAaA,MAAac,gBAAiB,SAAQb,iBAAA,CAAAc,YAAuC;EAC3E;EACA,CAAAC,gBAAiB;EACjB,CAAAC,wBAAyB;EACzB,CAAAC,YAAa;EACb,CAAAC,cAAe;EACf,CAAAC,gBAAiB;EACjB,CAAAC,oBAAqB;EACrB,CAAAC,eAAgB;EAChB,CAAAC,gBAAiB;EACjB,CAAAC,gBAAiB;EACjB;EAEA,CAAAC,MAAO;EACP,CAAAC,MAAO;EAEPC,YACEC,aAA4B,EAC5BC,gBAA2B,EAC3BC,YAA0B,EAC1BC,sBAA8C,EAC9CC,YAA0B,EAC1BC,oBAA0C,EAC1CC,cAA8B,EAC9BT,MAAA,GAAqC,IAAItB,mBAAA,CAAAgC,cAAc,EAAE,EACzDT,MAAiB;IAEjB,KAAK,EAAE;IACP,IAAI,CAAC,CAAAD,MAAO,GAAGA,MAAM;IACrB,IAAI,CAAC,CAAAC,MAAO,GAAGA,MAAM;IAErB;IACA,IAAI,CAAC,CAAAV,gBAAiB,GAAG,IAAIZ,qBAAA,CAAAgC,gBAAgB,CAACP,gBAAgB,CAAC;IAC/D,IAAI,CAAC,CAAAZ,wBAAyB,GAAG,IAAIX,6BAAA,CAAA+B,wBAAwB,CAC3DR,gBAAgB,EAChBE,sBAAsB,CACvB;IACD,IAAI,CAAC,CAAAb,YAAa,GAAG,IAAIb,iBAAA,CAAAiC,YAAY,CACnCP,sBAAsB,EACtBC,YAAY,EACZJ,aAAa,EACbC,gBAAgB,CACjB;IACD,IAAI,CAAC,CAAAV,cAAe,GAAG,IAAIZ,mBAAA,CAAAgC,cAAc,CACvCR,sBAAsB,EACtBC,YAAY,CACb;IACD,IAAI,CAAC,CAAAZ,gBAAiB,GAAG,IAAIZ,qBAAA,CAAAgC,gBAAgB,CAC3CT,sBAAsB,EACtBG,cAAc,CACf;IACD,IAAI,CAAC,CAAAb,oBAAqB,GAAG,IAAIZ,yBAAA,CAAAgC,oBAAoB,CAACZ,gBAAgB,CAAC;IACvE,IAAI,CAAC,CAAAP,eAAgB,GAAG,IAAIZ,oBAAA,CAAAgC,eAAe,CACzCX,sBAAsB,EACtBC,YAAY,EACZC,oBAAoB,EACpBP,MAAM,CACP;IACD,IAAI,CAAC,CAAAH,gBAAiB,GAAG,IAAIZ,qBAAA,CAAAgC,gBAAgB,CAC3Cb,YAAY,EACZD,gBAAgB,CACjB;IACD,IAAI,CAAC,CAAAL,gBAAiB,GAAG,IAAIZ,qBAAA,CAAAgC,gBAAgB,CAC3Cf,gBAAgB,EAChBE,sBAAsB,EACtBL,MAAM,CACP;IACD;EACF;EAEA,MAAM,CAAAmB,cAAeC,CACnBC,OAA6B;IAE7B,QAAQA,OAAO,CAACC,MAAM;MACpB,KAAK,aAAa;QAChB;QACA;MAEF;MACA;MACA,KAAK,eAAe;QAClB,OAAO,IAAI,CAAC,CAAAhC,gBAAiB,CAACiC,KAAK,EAAE;MACvC,KAAK,2BAA2B;QAC9B,OAAO,MAAM,IAAI,CAAC,CAAAjC,gBAAiB,CAACkC,iBAAiB,CAACH,OAAO,CAACI,MAAM,CAAC;MACvE,KAAK,yBAAyB;QAC5B,OAAO,MAAM,IAAI,CAAC,CAAAnC,gBAAiB,CAACoC,eAAe,EAAE;MACvD,KAAK,2BAA2B;QAC9B,OAAO,MAAM,IAAI,CAAC,CAAApC,gBAAiB,CAACqC,iBAAiB,CACnD,IAAI,CAAC,CAAA5B,MAAO,CAAC6B,4BAA4B,CAACP,OAAO,CAACI,MAAM,CAAC,CAC1D;MACH;MAEA;MACA;MACA,KAAK,0BAA0B;QAC7B,OAAO,MAAM,IAAI,CAAC,CAAAlC,wBAAyB,CAACsC,QAAQ,CAClD,IAAI,CAAC,CAAA9B,MAAO,CAAC+B,mBAAmB,CAACT,OAAO,CAACI,MAAM,CAAC,CACjD;MACH,KAAK,mCAAmC;QACtC,OAAO,MAAM,IAAI,CAAC,CAAAlC,wBAAyB,CAACwC,iBAAiB,CAC3D,IAAI,CAAC,CAAAhC,MAAO,CAACiC,4BAA4B,CAACX,OAAO,CAACI,MAAM,CAAC,CAC1D;MACH,KAAK,uBAAuB;QAC1B,OAAO,MAAM,IAAI,CAAC,CAAAlC,wBAAyB,CAACgC,KAAK,CAC/C,IAAI,CAAC,CAAAxB,MAAO,CAACkC,gBAAgB,CAACZ,OAAO,CAACI,MAAM,CAAC,CAC9C;MACH,KAAK,wBAAwB;QAC3B,OAAO,MAAM,IAAI,CAAC,CAAAlC,wBAAyB,CAAC2C,MAAM,CAChD,IAAI,CAAC,CAAAnC,MAAO,CAACoC,iBAAiB,CAACd,OAAO,CAACI,MAAM,CAAC,CAC/C;MACH,KAAK,yBAAyB;QAC5B,OAAO,IAAI,CAAC,CAAAlC,wBAAyB,CAAC6C,OAAO,CAC3C,IAAI,CAAC,CAAArC,MAAO,CAACsC,kBAAkB,CAAChB,OAAO,CAACI,MAAM,CAAC,CAChD;MACH,KAAK,kCAAkC;QACrC,OAAO,MAAM,IAAI,CAAC,CAAAlC,wBAAyB,CAAC+C,gBAAgB,CAC1D,IAAI,CAAC,CAAAvC,MAAO,CAACwC,2BAA2B,CAAClB,OAAO,CAACI,MAAM,CAAC,CACzD;MACH,KAAK,6BAA6B;QAChC,OAAO,MAAM,IAAI,CAAC,CAAAlC,wBAAyB,CAACiD,WAAW,CACrD,IAAI,CAAC,CAAAzC,MAAO,CAAC0C,sBAAsB,CAACpB,OAAO,CAACI,MAAM,CAAC,CACpD;MACH,KAAK,0BAA0B;QAC7B,OAAO,MAAM,IAAI,CAAC,CAAAlC,wBAAyB,CAACmD,QAAQ,CAClD,IAAI,CAAC,CAAA3C,MAAO,CAAC4C,mBAAmB,CAACtB,OAAO,CAACI,MAAM,CAAC,CACjD;MACH,KAAK,uBAAuB;QAC1B,OAAO,MAAM,IAAI,CAAC,CAAAlC,wBAAyB,CAACqD,KAAK,CAC/C,IAAI,CAAC,CAAA7C,MAAO,CAAC8C,gBAAgB,CAACxB,OAAO,CAACI,MAAM,CAAC,CAC9C;MACH,KAAK,wBAAwB;QAC3B,OAAO,MAAM,IAAI,CAAC,CAAAlC,wBAAyB,CAACuD,MAAM,CAChD,IAAI,CAAC,CAAA/C,MAAO,CAACgD,iBAAiB,CAAC1B,OAAO,CAACI,MAAM,CAAC,CAC/C;MACH,KAAK,6BAA6B;QAChC,OAAO,MAAM,IAAI,CAAC,CAAAlC,wBAAyB,CAACyD,WAAW,CACrD,IAAI,CAAC,CAAAjD,MAAO,CAACkD,sBAAsB,CAAC5B,OAAO,CAACI,MAAM,CAAC,CACpD;MACH,KAAK,iCAAiC;QACpC,OAAO,MAAM,IAAI,CAAC,CAAAlC,wBAAyB,CAAC2D,eAAe,CACzD,IAAI,CAAC,CAAAnD,MAAO,CAACoD,0BAA0B,CAAC9B,OAAO,CAACI,MAAM,CAAC,CACxD;MACH;MAEA;MACA;MACA,KAAK,gBAAgB;QACnB,OAAO,IAAI,CAAC,CAAAjC,YAAa,CAAC4D,UAAU,CAClC,IAAI,CAAC,CAAArD,MAAO,CAACsD,qBAAqB,CAAChC,OAAO,CAACI,MAAM,CAAC,CACnD;MACH,KAAK,kBAAkB;QACrB,OAAO,IAAI,CAAC,CAAAjC,YAAa,CAAC8D,YAAY,CACpC,IAAI,CAAC,CAAAvD,MAAO,CAACwD,uBAAuB,CAAClC,OAAO,CAACI,MAAM,CAAC,CACrD;MACH,KAAK,iBAAiB;QACpB,OAAO,MAAM,IAAI,CAAC,CAAAjC,YAAa,CAACgE,WAAW,CACzC,IAAI,CAAC,CAAAzD,MAAO,CAAC0D,sBAAsB,CAACpC,OAAO,CAACI,MAAM,CAAC,CACpD;MACH;MAEA;MACA;MACA,KAAK,sBAAsB;QACzB,OAAO,MAAM,IAAI,CAAC,CAAAhC,cAAe,CAACiE,cAAc,CAC9C,IAAI,CAAC,CAAA3D,MAAO,CAAC4D,yBAAyB,CAACtC,OAAO,CAACI,MAAM,CAAC,CACvD;MACH,KAAK,sBAAsB;QACzB,OAAO,MAAM,IAAI,CAAC,CAAAhC,cAAe,CAACmE,cAAc,CAC9C,IAAI,CAAC,CAAA7D,MAAO,CAAC8D,yBAAyB,CAACxC,OAAO,CAACI,MAAM,CAAC,CACvD;MACH,KAAK,gBAAgB;QACnB,OAAO,MAAM,IAAI,CAAC,CAAAhC,cAAe,CAACqE,QAAQ,CACxC,IAAI,CAAC,CAAA/D,MAAO,CAACgE,mBAAmB,CAAC1C,OAAO,CAACI,MAAM,CAAC,CACjD;MACH;MAEA;MACA;MACA,KAAK,sBAAsB;QACzB,OAAO,MAAM,IAAI,CAAC,CAAA/B,gBAAiB,CAACsE,YAAY,CAC9C,IAAI,CAAC,CAAAjE,MAAO,CAACkE,uBAAuB,CAAC5C,OAAO,CAACI,MAAM,CAAC,CACrD;MACH,KAAK,yBAAyB;QAC5B,OAAO,MAAM,IAAI,CAAC,CAAA/B,gBAAiB,CAACwE,eAAe,CACjD,IAAI,CAAC,CAAAnE,MAAO,CAACoE,0BAA0B,CAAC9C,OAAO,CAACI,MAAM,CAAC,CACxD;MACH,KAAK,0BAA0B;QAC7B,OAAO,MAAM,IAAI,CAAC,CAAA/B,gBAAiB,CAAC0E,gBAAgB,CAClD,IAAI,CAAC,CAAArE,MAAO,CAACsE,2BAA2B,CAAChD,OAAO,CAACI,MAAM,CAAC,CACzD;MACH,KAAK,0BAA0B;QAC7B,OAAO,MAAM,IAAI,CAAC,CAAA/B,gBAAiB,CAAC4E,gBAAgB,CAClD,IAAI,CAAC,CAAAvE,MAAO,CAACwE,2BAA2B,CAAClD,OAAO,CAACI,MAAM,CAAC,CACzD;MACH,KAAK,qBAAqB;QACxB,OAAO,MAAM,IAAI,CAAC,CAAA/B,gBAAiB,CAAC8E,WAAW,CAC7C,IAAI,CAAC,CAAAzE,MAAO,CAAC0E,sBAAsB,CAACpD,OAAO,CAACI,MAAM,CAAC,CACpD;MACH,KAAK,yBAAyB;QAC5B,OAAO,MAAM,IAAI,CAAC,CAAA/B,gBAAiB,CAACgF,eAAe,CACjD,IAAI,CAAC,CAAA3E,MAAO,CAAC4E,0BAA0B,CAACtD,OAAO,CAACI,MAAM,CAAC,CACxD;MACH,KAAK,yBAAyB;QAC5B,OAAO,MAAM,IAAI,CAAC,CAAA/B,gBAAiB,CAACkF,eAAe,CACjD,IAAI,CAAC,CAAA7E,MAAO,CAAC8E,0BAA0B,CAACxD,OAAO,CAACI,MAAM,CAAC,CACxD;MACH;MAEA;MACA;MACA,KAAK,2BAA2B;QAC9B,OAAO,MAAM,IAAI,CAAC,CAAA9B,oBAAqB,CAACmF,cAAc,CACpD,IAAI,CAAC,CAAA/E,MAAO,CAACgF,yBAAyB,CAAC1D,OAAO,CAACI,MAAM,CAAC,CACvD;MACH;MAEA;MACA;MACA,KAAK,yBAAyB;QAC5B,OAAO,MAAM,IAAI,CAAC,CAAA7B,eAAgB,CAACoF,gBAAgB,CACjD,IAAI,CAAC,CAAAjF,MAAO,CAACkF,2BAA2B,CAAC5D,OAAO,CAACI,MAAM,CAAC,CACzD;MACH,KAAK,qBAAqB;QACxB,OAAO,MAAM,IAAI,CAAC,CAAA7B,eAAgB,CAACsF,YAAY,CAC7C,IAAI,CAAC,CAAAnF,MAAO,CAACoF,uBAAuB,CAClC,IAAI,CAAC,CAAAC,mBAAoB,CAAC/D,OAAO,CAACI,MAAM,CAAC,CAC1C,CACF;MACH,KAAK,eAAe;QAClB,OAAO,MAAM,IAAI,CAAC,CAAA7B,eAAgB,CAACyF,MAAM,CACvC,IAAI,CAAC,CAAAtF,MAAO,CAACuF,iBAAiB,CAC5B,IAAI,CAAC,CAAAF,mBAAoB,CAAC/D,OAAO,CAACI,MAAM,CAAC,CAC1C,CACF;MACH,KAAK,iBAAiB;QACpB,OAAO,MAAM,IAAI,CAAC,CAAA7B,eAAgB,CAAC2F,QAAQ,CACzC,IAAI,CAAC,CAAAxF,MAAO,CAACyF,mBAAmB,CAC9B,IAAI,CAAC,CAAAJ,mBAAoB,CAAC/D,OAAO,CAACI,MAAM,CAAC,CAC1C,CACF;MACH,KAAK,kBAAkB;QACrB,OAAO,IAAI,CAAC,CAAA7B,eAAgB,CAAC6F,SAAS,CACpC,IAAI,CAAC,CAAA1F,MAAO,CAAC2F,oBAAoB,CAACrE,OAAO,CAACI,MAAM,CAAC,CAClD;MACH,KAAK,4BAA4B;QAC/B,OAAO,MAAM,IAAI,CAAC,CAAA7B,eAAgB,CAAC+F,mBAAmB,CACpD,IAAI,CAAC,CAAA5F,MAAO,CAAC6F,8BAA8B,CAACvE,OAAO,CAACI,MAAM,CAAC,CAC5D;MACH;MAEA;MACA;MACA,KAAK,aAAa;QAChB,OAAO,MAAM,IAAI,CAAC,CAAA5B,gBAAiB,CAACqC,MAAM,CAACb,OAAO,CAACI,MAAM,CAAC;MAC5D,KAAK,gBAAgB;QACnB,OAAO,IAAI,CAAC,CAAA5B,gBAAiB,CAACgG,MAAM,EAAE;MACxC,KAAK,mBAAmB;QACtB,OAAO,MAAM,IAAI,CAAC,CAAAhG,gBAAiB,CAACiG,SAAS,CAC3C,IAAI,CAAC,CAAA/F,MAAO,CAACgG,oBAAoB,CAAC1E,OAAO,CAACI,MAAM,CAAC,EACjDJ,OAAO,CAAC2E,OAAO,CAChB;MACH,KAAK,qBAAqB;QACxB,OAAO,MAAM,IAAI,CAAC,CAAAnG,gBAAiB,CAACoG,WAAW,CAC7C,IAAI,CAAC,CAAAlG,MAAO,CAACgG,oBAAoB,CAAC1E,OAAO,CAACI,MAAM,CAAC,EACjDJ,OAAO,CAAC2E,OAAO,CAChB;MACH;MAEA;MACA;MACA,KAAK,uBAAuB;QAC1B,OAAO,MAAM,IAAI,CAAC,CAAAlG,gBAAiB,CAACoG,aAAa,CAC/C,IAAI,CAAC,CAAAnG,MAAO,CAACoG,wBAAwB,CAAC9E,OAAO,CAACI,MAAM,CAAC,CACtD;MACH,KAAK,oBAAoB;QACvB,OAAO,MAAM,IAAI,CAAC,CAAA3B,gBAAiB,CAACsG,UAAU,CAC5C,IAAI,CAAC,CAAArG,MAAO,CAACsG,qBAAqB,CAAChF,OAAO,CAACI,MAAM,CAAC,CACnD;MACH,KAAK,mBAAmB;QACtB,OAAO,MAAM,IAAI,CAAC,CAAA3B,gBAAiB,CAACwG,SAAS,CAC3C,IAAI,CAAC,CAAAvG,MAAO,CAACwG,oBAAoB,CAAClF,OAAO,CAACI,MAAM,CAAC,CAClD;MACH;IACF;IAEA;IACA;IACA;IACA,MAAM,IAAIpD,aAAA,CAAAmI,uBAAuB,CAAC,oBAAoBnF,OAAO,CAACC,MAAM,IAAI,CAAC;EAC3E;EAEA;EACA;EACA,CAAA8D,mBAAoBqB,CAAChF,MAA+B;IAClD,IACE,OAAOA,MAAM,KAAK,QAAQ,IAC1BA,MAAM,IACN,QAAQ,IAAIA,MAAM,IAClB,OAAOA,MAAM,CAACiF,MAAM,KAAK,QAAQ,IACjCjF,MAAM,CAACiF,MAAM,IACb,SAAS,IAAIjF,MAAM,CAACiF,MAAM,EAC1B;MACA,OAAQjF,MAAM,CAACiF,MAAc,CAAC,OAAO,CAAC;IACxC;IACA,OAAOjF,MAAM;EACf;EAEA,MAAMN,cAAcA,CAACE,OAA6B;IAChD,IAAI;MACF,MAAMsF,MAAM,GAAG,MAAM,IAAI,CAAC,CAAAxF,cAAe,CAACE,OAAO,CAAC;MAElD,MAAMuF,QAAQ,GAAG;QACfC,IAAI,EAAE,SAAS;QACfC,EAAE,EAAEzF,OAAO,CAACyF,EAAE;QACdH;OACsC;MAExC,IAAI,CAACI,IAAI,mDAAkC;QACzCC,OAAO,EAAE7H,oBAAA,CAAA8H,eAAe,CAACC,cAAc,CAACN,QAAQ,EAAEvF,OAAO,CAAC2E,OAAO,CAAC;QAClEmB,KAAK,EAAE9F,OAAO,CAACC;OAChB,CAAC;IACJ,CAAC,CAAC,OAAO8F,CAAC,EAAE;MACV,IAAIA,CAAC,YAAY/I,aAAA,CAAAgJ,SAAS,EAAE;QAC1B,IAAI,CAACN,IAAI,mDAAkC;UACzCC,OAAO,EAAE7H,oBAAA,CAAA8H,eAAe,CAACC,cAAc,CACrCE,CAAC,CAACE,eAAe,CAACjG,OAAO,CAACyF,EAAE,CAAC,EAC7BzF,OAAO,CAAC2E,OAAO,CAChB;UACDmB,KAAK,EAAE9F,OAAO,CAACC;SAChB,CAAC;MACJ,CAAC,MAAM;QACL,MAAMiG,KAAK,GAAGH,CAAU;QACxB,IAAI,CAAC,CAAApH,MAAO,GAAGxB,QAAA,CAAAgJ,OAAO,CAACC,IAAI,EAAEF,KAAK,CAAC;QACnC,IAAI,CAACR,IAAI,mDAAkC;UACzCC,OAAO,EAAE7H,oBAAA,CAAA8H,eAAe,CAACC,cAAc,CACrC,IAAI7I,aAAA,CAAAqJ,qBAAqB,CACvBH,KAAK,CAACP,OAAO,EACbO,KAAK,CAACI,KAAK,CACZ,CAACL,eAAe,CAACjG,OAAO,CAACyF,EAAE,CAAC,EAC7BzF,OAAO,CAAC2E,OAAO,CAChB;UACDmB,KAAK,EAAE9F,OAAO,CAACC;SAChB,CAAC;MACJ;IACF;EACF;;AAzVFsG,OAAA,CAAAxI,gBAAA,GAAAA,gBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}